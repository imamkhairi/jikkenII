釧路工業高等専門学校情報工学分野のイマムカイリルビスと申します。今回、乱数を用いたプログラムに関して発表したいと思います。

この発表の流れはこうだ。実行環境、サイコロ、円の面積、男女10名を横一列に並べる、コインゲーム、そして最後のビンゴゲームです。

実験で使ったコンピュータはwindows 11 pro 22H2、CPUはamd ryzen 5 5600x、メモリは16GB、コンパイルにはGCCを使った。


最初の問題は7個サイコロが同じ出目（でめ）になる確率です。
ここに表しているのは、これは望ましい結果の例です。
7個のサイコロをすべて振って、最初のサイコロを条件として、２つめのサイコロから1個ずつチェックします。
つまり、すべてのサイコロが条件と同じであれば成功、ではなければ失敗となります。
最初のサイコロは1が検索条件になるので、2個目から7個目までチェックします。
全部同じ出目だから成功しました。
しかし、2つ目の並び方を見てわかるように、条件を２にしているので、最初のチェックはいいですが、3つ目のサイコロでは検索条件に一致しません。
そこで、7つ目のサイコロまで処理を続けるではなく、処理を中断して次の並び方のチェックを始めます。
そうすることで、今回のシミュレーション結果が、10回のシミュレーションの平均値を示しています。

最初は6面のサイコロです。グラフをみてわかるように、サイコロを10000（いちまん）回以上振らないと理論値に近づかないことが分かると思います。
4面サイコロの場合です。６面サイコロと同じように10000（いちまん）回シミュレーションをすると、出た確率の値が理論値に近づいていいた。
5面（ごめん）のサイコロも、10000回のシミュレーションを行うまでは、確率の値が上がっていくので、６面と４面サイコロ同じ結果になります。
次は、7面体（しちめん）のサイコロです。再び1万回シミュレーションをすると、理論値に近づくと思うかもしれませんが、1000000（ひゃくまん）回シミュレーションを行うと、確率値が理論値に近づくという異なる結果が出ました。
また、8面（はちめん）のサイコロでも、1000000（ひゃくまん）回のシミュレーションを行うと、確率の値が理論値に近づくという同じ結果が得られました。

結論として、次のようになります。
面の数が個数未満の場合、理論値に近づくのは一万回のシミュレーションが必要です。一方、面の個数が個数以上の場合、理論値に近づくのひゃく万回のシミュレーションが必要です。


次は半径7mまたは10mの円の面積の問題です。
円の面積を計算する方法は次のようになります。
まず、乱数を用いて点をプロットし、円の中に何個、点が入って、何個、点が入っていないかを数えます。
円の中に何個、点がプロットされているかをa、円の外何個、点がプロットされているかをbとします。
円の面積としかく形の面積を比較することで、円の面積はこの方式によって計算できます。

シミュレーション回数が増えるにつれて、結果が理論値に近づいていることがとわかります。
この場合、サンプル数が100000（じゅうまん）個になると、得られた面積の値は円の実際の面積に近づいています。
半径10mの円でも、サンプル数が10000個になるにつれて、シミュレーション結果が理論値に近づいていくので、同じ結果になりました。


次は、男女10人を一列に並べる問題です。
ただし、各女子の左に自身より背の高い男子が1人でもいることが条件としています。
つまり、この３番目女子に注目する場合、この範囲に少なくとも、三番目女子より背の高い男子がいれば、この並び方は正しいです。
しかし、一人もいなければ、この並び方は誤りです。
先ほどと同じように、１回でも条件を満たさないとすぐにチェックを中止して、次の並び方のチェックを行う。

その結果、100回シミュレーションを行うと、シミュレーション結果は理論値に近づくことがわかる。


次の問題はコインゲームについてです。
このゲームのゴールは相手からすべてのコインをもらうとのことです。
しかし、最初はAには6個のコインを渡し、Bには2個のコインしか渡しました。
このゲームはサイコロを使ったもので、サイコロを振って1か2が出るたびにAはBからコインを1個もらい、3から6が出たらBはAからに１個コインをもらいます。
例えば、このゲームを始めて、このラウンドで1が出たら、Aにコインを渡さなければなりません。そして、次のラウンドで6が出たら、AはBにコインを1枚渡します。
どちらか8個のコインを獲得したらゲームは終了です。
この問題は、Aがゲームに勝つ確率はどのくらいかシミュレーションで数えてみました。

結果は見ての通り、Aが持っているコインの数が大きく影響します。
Aが持っているコインの数が多ければ多いほど、Aがゲームに勝つ確率は高くなります。
全体として、Bの方がAよりもゲームに勝つ確率が高いですが、Aが7個コイン持って始まったときだけで、ゲームに勝つ確率は50:50になります。


今日の最後の問題はビンゴです。
ご存知のように、ビンゴカードにはこのようなルールがあります。
ビンゴになるには、この3つの条件のいずれかを満たす必要があります。

これから示す結果は、すべて100000000（いちおく）回のシミュレーションの結果です。

まず、７回以内当たる確率です。平均値からわかるように、確率は1.24807x10^-4かありません。
2つ目は、ビンゴゲームで最もラッキーな人、つまり4回だけで当たるの確率はどれくらいかというものです。結果は予想通り、このグラフにある7回以下の確率より低いです。平均は3.367x10^-6です。
次は、ビンゴゲームで最も不運（ふうん）な人、ゲームに勝つまで何まで待たなければならないか、というものです。
そして最後の問題は、あなたがビンゴで最も不運な人になる確率はどのくらいか、というものである。平均値からみると1.354x10^-6


１．成り立たないと思います。今回の問題はサイコロが7個の場合です。だから、この結論はサイコロが7個のときにしか成り立たない。

２．私も最初はそうおもいましたが、実は半径の１３ｍの円に対してもシミュレーションしました。その結果が、10^5以上から理論値に近づくこともなりました。７ｍの場合は、シミュレーションの回数が少ないため10^5の結果は理論値に少し外れると思います


４．確率はこの式で計算される。つまり、分母が低い場合、確率は高くなる傾向がある。
これが、理論値に収束する前にシミュレーションが理論値よりも高い結果を得る傾向がある理由である。


5.それぞれ、ビンゴを1億回シミュレーションして計算する。そして、ゲームが終了した回数を配列の添え字によってに格納する。例えば４回であたるばあい、配列の添え字４の値を＋１。そして確率を計算する。
